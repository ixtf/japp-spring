<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<p:dataTable id="tableCrmFields" var="_crmField"
		value="#{storageReportController.report.crmFields}">
		<f:facet name="header">
			<h:outputText value="#{msg['crmField']}" />
		</f:facet>

		<p:column headerText="#{msg['operation']}" style="width:4%">
			<p:commandLink process="@this"
				update=":form:tabView:tableCrmFields,:form:message"
				action="#{storageReportController.removeCrmFiled}"
				icon="ui-icon-minus">
				<h:outputText value="#{msg['delete']}" />
				<f:setPropertyActionListener value="#{_crmField}"
					target="#{storageReportController.crmField}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="#{msg['name']}"
			sortBy="#{msg[_crmField.displayName]}">
			<h:outputText value="#{msg[_crmField.displayName]}" />
		</p:column>
	</p:dataTable>

	<p:panel header="#{msg['select']}#{msg['crmField']}" toggleable="true">
		<p:dataTable var="_crmField"
			value="#{storageReportController.allCrmFields}">
			<p:column headerText="#{msg['operation']}" style="width:4%">
				<p:commandLink process="@this"
					update=":form:tabView:tableCrmFields,:form:message"
					action="#{storageReportController.addCrmFiled}"
					icon="ui-icon-plus">
					<h:outputText value="#{msg['add']}" />
					<f:setPropertyActionListener value="#{_crmField}"
						target="#{storageReportController.crmField}" />
				</p:commandLink>
			</p:column>

			<p:column headerText="#{msg['name']}"
				sortBy="#{msg[_crmField.displayName]}">
				<h:outputText value="#{msg[_crmField.displayName]}" />
			</p:column>
		</p:dataTable>
	</p:panel>
</ui:composition>
